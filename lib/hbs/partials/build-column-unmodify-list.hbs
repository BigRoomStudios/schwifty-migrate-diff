
{{!--
    Note: these are intented all wonky because they need to look like that
    for correct spacing for rendering
--}}

{{#each columns}}
    {{#each tableDelta.create}}

        {{#if (keyInObject this @root.allTables)}}
        knex.schema.createTableIfNotExists('{{this}}', function(table) {

            {{#each (objectKeys (keyFromObject 'knexSchema' (keyFromObject this @root.allTables)))}}
            table.{{keyFromObject this (keyFromObject 'knexSchema' (keyFromObject ../this @root.allTables))}}('{{this}}');
            {{/each}}
        }),
        {{else}}
        knex.schema.createTableIfNotExists('{{this}}'),
        {{/if}}

    {{/each}}

    // Table delete not yet supported
    {{#each tableDelta.drop}}
    knex.schema.dropTable('{{this}}'),
    {{/each}}

    // Table nameChange not yet supported
    {{#each tableDelta.alter}}
    knex.schema.renameTable('{{this}}').
    {{/each}}
{{/each}}
